{"version":3,"sources":["../../src/index.tsx","examples/DogsExample.js","examples/SimpleExample.js","examples/ReuseRefExample.js","App.js","index.js"],"names":["useScrollToBottom","React","isBottom","setIsBottom","node","setRef","observer","IntersectionObserver","entry","root","parentElement","DogsExample","useState","images","setImages","loadImages","a","fetch","response","json","data","i","Set","message","setBottomRef","useEffect","className","map","image","key","src","alt","ref","SimpleExample","data-testid","style","background","ReuseRefExample","targetFirst","setTargetFirst","onClick","data-active","App","href","target","rel","id","ReactDOM","render","document","getElementById"],"mappings":"4TAEaA,EAAoB,W,MAICC,uBAAzBC,OAAUC,O,EACMF,yBAAhBG,OAAMC,OAsBb,OApBAJ,qBAAgB,WACd,MAYA,OAVIG,GAAQA,EAAZ,eACEE,EAAW,IAAIC,sBACb,gBAAEC,EAAF,YAAaL,EAAYK,EAAzB,kBACA,CAAEC,KAAML,EAAKM,iBAEfJ,WAEAH,MAGK,WACL,GACEG,kBAGH,CAlBHL,IAoBO,CAACI,EAAR,I,MCzBa,SAASM,IAAe,MAAD,EACRV,IAAMW,SAAS,IADP,mBAC7BC,EAD6B,KACrBC,EADqB,KAG9BC,EAAU,uCAAG,8BAAAC,EAAA,sEACMC,MAAM,6CADZ,cACXC,EADW,gBAEEA,EAASC,OAFX,OAEXC,EAFW,OAGjBN,EAAUO,GAAK,IAAI,IAAIC,IAAI,IAAID,KAAMD,EAAKG,YAHzB,2CAAH,qDAHoB,EASHvB,IATG,mBAS7BwB,EAT6B,KASftB,EATe,KAiBpC,OANAD,IAAMwB,UAAU,KACVvB,GACFa,KAED,CAACb,IAGF,yBAAKwB,UAAU,kBACZb,EAAOc,IAAIC,GACV,4BAAQC,IAAKD,GACX,yBAAKE,IAAKF,EAAOG,IAAI,UAGzB,4BAAQC,IAAKR,GAAb,e,MCxBS,SAASS,IAAiB,MAAD,EACLjC,IADK,mBAC/BwB,EAD+B,KACjBtB,EADiB,KAGtC,OACE,yBAAKwB,UAAU,oBACb,yBACEQ,cAAY,cACZR,UAAU,cACVS,MAAO,CAAEC,WAAYlC,EAAW,OAAS,UAExCA,GAAY,kBAEf,yBAAK8B,IAAKR,GAAV,W,MCZS,SAASa,IAAmB,MAAD,EACPrC,IADO,mBACjCwB,EADiC,KACnBtB,EADmB,OAEFU,oBAAS,GAFP,mBAEjC0B,EAFiC,KAEpBC,EAFoB,KAIxC,OACE,6BACE,yCAAerC,EAAW,IAC1B,4BACEgC,cAAY,gBACZM,QAAS,IAAMD,GAAgBD,IAFjC,aAIaA,EAAc,QAAU,UAGrC,6BAEA,sCACA,yBAAKZ,UAAU,oBACb,yBAAKA,UAAU,gBACf,yBACEQ,cAAY,WACZO,cAAaH,GAAepC,EAC5B8B,IAAKM,EAAcd,EAAe,MAHpC,aASF,6BACA,uCACA,yBAAKE,UAAU,oBACb,yBAAKA,UAAU,gBACf,yBACEQ,cAAY,WACZO,eAAcH,GAAepC,EAC7B8B,IAAKM,EAAc,KAAOd,GAH5B,cC9BO,SAASkB,IACtB,OACE,iCACE,gCACE,6BACE,4BACE,4BACE,uBACEC,KAAK,uDACLC,OAAO,SACPC,IAAI,uBAHN,WAQF,4BACE,uBAAGF,KAAK,iBAAR,YAEF,4BACE,uBAAGA,KAAK,aAAR,gBAKR,6BAASG,GAAG,gBACV,gCACE,wCAEF,iCACE,6BACE,uFAMN,6BAASA,GAAG,YACV,gCACE,yCAEF,iCACE,gCACE,4BACE,uBAAGH,KAAK,0GAAR,sDAKJ,kBAAC,EAAD,OAEF,iCACE,gCACE,4BACE,uBAAGA,KAAK,wGAAR,mDAKJ,kBAAC,EAAD,OAEF,iCACE,gCACE,4BACE,uBAAGA,KAAK,4GAAR,oCAIF,sCACU,IACR,uBAAGA,KAAK,6GAAR,UAFF,MAQF,kBAAC,EAAD,SC5EVI,IAASC,OAAO,kBAACN,EAAD,MAASO,SAASC,eAAe,W","file":"static/js/main.d8228257.chunk.js","sourcesContent":["import * as React from \"react\";\n\nexport const useScrollToBottom = <T extends Element>(): [\n  React.RefCallback<T>,\n  boolean\n] => {\n  const [isBottom, setIsBottom] = React.useState(false);\n  const [node, setRef] = React.useState<any>(null);\n\n  React.useEffect(() => {\n    let observer: IntersectionObserver;\n\n    if (node && node.parentElement) {\n      observer = new IntersectionObserver(\n        ([entry]) => setIsBottom(entry.isIntersecting),\n        { root: node.parentElement }\n      );\n      observer.observe(node);\n    } else {\n      setIsBottom(false);\n    }\n\n    return () => {\n      if (observer) {\n        observer.disconnect();\n      }\n    };\n  }, [node]);\n\n  return [setRef, isBottom];\n};\n","import React from \"react\";\nimport { useScrollToBottom } from \"use-scroll-to-bottom\";\nimport \"./DogsExample.css\";\n\nexport default function DogsExample() {\n  const [images, setImages] = React.useState([]);\n\n  const loadImages = async () => {\n    const response = await fetch(\"https://dog.ceo/api/breeds/image/random/3\");\n    const data = await response.json();\n    setImages(i => [...new Set([...i, ...data.message])]);\n  };\n\n  const [setBottomRef, isBottom] = useScrollToBottom();\n\n  React.useEffect(() => {\n    if (isBottom) {\n      loadImages();\n    }\n  }, [isBottom]);\n\n  return (\n    <div className=\"dogs-container\">\n      {images.map(image => (\n        <figure key={image}>\n          <img src={image} alt=\"dog\" />\n        </figure>\n      ))}\n      <figure ref={setBottomRef}>Loading...</figure>\n    </div>\n  );\n}\n","import React from \"react\";\nimport { useScrollToBottom } from \"use-scroll-to-bottom\";\nimport \"./SimpleExample.css\";\n\nexport default function SimpleExample() {\n  const [setBottomRef, isBottom] = useScrollToBottom();\n\n  return (\n    <div className=\"simple-container\">\n      <div\n        data-testid=\"big-element\"\n        className=\"big-element\"\n        style={{ background: isBottom ? \"grey\" : \"green\" }}\n      >\n        {isBottom && \"Bottom reached\"}\n      </div>\n      <div ref={setBottomRef}>Bottom</div>\n    </div>\n  );\n}\n","import React, { useState } from \"react\";\nimport { useScrollToBottom } from \"use-scroll-to-bottom\";\nimport \"./ReuseRefExample.css\";\n\nexport default function ReuseRefExample() {\n  const [setBottomRef, isBottom] = useScrollToBottom();\n  const [targetFirst, setTargetFirst] = useState(true);\n\n  return (\n    <div>\n      <h1>Is bottom {isBottom + \"\"}</h1>\n      <button\n        data-testid=\"toggle-target\"\n        onClick={() => setTargetFirst(!targetFirst)}\n      >\n        Targeting {targetFirst ? \"First\" : \"Second\"}\n      </button>\n\n      <hr />\n\n      <h3>First </h3>\n      <div className=\"simple-container\">\n        <div className=\"big-element\" />\n        <div\n          data-testid=\"bottom-1\"\n          data-active={targetFirst && isBottom}\n          ref={targetFirst ? setBottomRef : null}\n        >\n          Bottom 1\n        </div>\n      </div>\n\n      <hr />\n      <h3>Second </h3>\n      <div className=\"simple-container\">\n        <div className=\"big-element\" />\n        <div\n          data-testid=\"bottom-2\"\n          data-active={!targetFirst && isBottom}\n          ref={targetFirst ? null : setBottomRef}\n        >\n          Bottom 2\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React from \"react\";\n\nimport DogsExample from \"./examples/DogsExample\";\nimport SimpleExample from \"./examples/SimpleExample\";\nimport ReuseRefExample from \"./examples/ReuseRefExample\";\n\nexport default function App() {\n  return (\n    <section>\n      <header>\n        <nav>\n          <ul>\n            <li>\n              <a\n                href=\"https://github.com/tudorgergely/use-scroll-to-bottom\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n              >\n                github\n              </a>\n            </li>\n            <li>\n              <a href=\"#instructions\">install</a>\n            </li>\n            <li>\n              <a href=\"#examples\">examples</a>\n            </li>\n          </ul>\n        </nav>\n      </header>\n      <section id=\"instructions\">\n        <header>\n          <h1>install</h1>\n        </header>\n        <article>\n          <pre>\n            <code>{`\n$ npm install use-scroll-to-bottom\n            `}</code>\n          </pre>\n        </article>\n      </section>\n      <section id=\"examples\">\n        <header>\n          <h1>examples</h1>\n        </header>\n        <article>\n          <header>\n            <h2>\n              <a href=\"https://github.com/tudorgergely/use-scroll-to-bottom/tree/master/example/src/examples/SimpleExample.js\">\n                1. Changing element color when bottom is reached\n              </a>\n            </h2>\n          </header>\n          <SimpleExample />\n        </article>\n        <article>\n          <header>\n            <h2>\n              <a href=\"https://github.com/tudorgergely/use-scroll-to-bottom/tree/master/example/src/examples/DogsExample.js\">\n                2. Loading dogs images when bottom is reached\n              </a>\n            </h2>\n          </header>\n          <DogsExample />\n        </article>\n        <article>\n          <header>\n            <h2>\n              <a href=\"https://github.com/tudorgergely/use-scroll-to-bottom/tree/master/example/src/examples/ReuseRefExample.js\">\n                3. Reuse ref between 2 examples\n              </a>\n            </h2>\n            <h3>\n              (thanks{\" \"}\n              <a href=\"https://www.reddit.com/r/reactjs/comments/ftgevr/created_a_small_hook_which_tells_you_when_youve/fm7hej5/\">\n                reddit\n              </a>\n              )\n            </h3>\n          </header>\n          <ReuseRefExample />\n        </article>\n      </section>\n    </section>\n  );\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}